<Project>

  <PropertyGroup Label="Compile">
    <Features>Strict</Features>
    <Nullable>Enable</Nullable>
    <LangVersion>Latest</LangVersion>
    <AllowUnsafeBlocks>true</AllowUnsafeBlocks>
  </PropertyGroup>

  <PropertyGroup Label="Assembly">
    <SignAssembly>true</SignAssembly>
    <AssemblyOriginatorKeyFile>$(RepositoryDirectory)toolkit.snk</AssemblyOriginatorKeyFile>
  </PropertyGroup>

  <PropertyGroup Label="Project">
    <IsTestProject>$(MSBuildProjectName.EndsWith('Tests'))</IsTestProject>
    <IsCoreProject Condition="$(IsTestProject)">False</IsCoreProject>
    <IsCoreProject Condition="'$(IsCoreProject)' == ''">True</IsCoreProject>
  </PropertyGroup>

  <PropertyGroup Label="Build">
    <NoWarn>NU1507</NoWarn>
    <IsPackable>true</IsPackable>
    <IsPublishable>true</IsPublishable>
    <ContinuousIntegrationBuild>$(TF_BUILD)</ContinuousIntegrationBuild>
    <ProjectName>$(MSBuildProjectName.Replace('CommunityToolkit.', ''))</ProjectName>
  </PropertyGroup>

  <PropertyGroup Label="Outputs">
    <!-- Common Outputs -->
    <BuildDir>$(RepositoryDirectory)~build\$(ProjectName)\</BuildDir>
    <PublishDir>$(RepositoryDirectory)~publish\$(ProjectName)\</PublishDir>
    <!-- Build Outputs -->
    <BaseOutputPath>$(BuildDir)bin\</BaseOutputPath>
    <BaseIntermediateOutputPath>$(BuildDir)obj\</BaseIntermediateOutputPath>
    <!-- Restore Outputs-->
    <MSBuildProjectExtensionsPath>$(BuildDir)ext\</MSBuildProjectExtensionsPath>
    <RestoreOutputPath>$(MSBuildProjectExtensionsPath)</RestoreOutputPath>
    <!-- Pack Outputs -->
    <PackageOutputPath>$(RepositoryDirectory)~packages\bin\</PackageOutputPath>
    <NuSpecOutputPath>$(RepositoryDirectory)~packages\obj\</NuSpecOutputPath>
    <!-- Test Outputs -->
    <VSTestResultsDirectory>$(BuildDir)TestResults\</VSTestResultsDirectory>
  </PropertyGroup>

  <!-- Extends NuGet packaging with specific features required for packing toolkit projects -->
  <Import Project="Community.Toolkit.Packaging.props" Condition="$(IsPackable)" />

</Project>